<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Panel Converter - ‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏ú‡πà‡∏ô‡πÑ‡∏°‡πâ‡πÄ‡∏õ‡πá‡∏ô 2D</title>
    <style>
        body {
            font-family: 'Sarabun', 'Noto Sans Thai', Arial, sans-serif;
            background: #f8f9fa;
            padding: 20px;
            margin: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #DEB887;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .controls button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .controls button:hover {
            background: linear-gradient(135deg, #A0522D 0%, #CD853F 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        
        .output-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .panel-output {
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .panel-output h3 {
            color: #8B4513;
            margin: 0 0 15px 0;
        }
        
        .svg-container {
            background: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .panel-info {
            background: white;
            border-radius: 5px;
            padding: 10px;
            font-size: 12px;
            margin-top: 10px;
            text-align: left;
        }
        
        #backToIndex {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            color: #8B4513;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: bold;
            z-index: 100;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 2px solid transparent;
        }

        #backToIndex:hover {
            background: white;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            border-color: #DEB887;
        }
    </style>
</head>
<body>
    <a href="../index.html" id="backToIndex">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    
    <div class="container">
        <div class="header">
            <h1>üîß 2D Panel Converter</h1>
            <p>‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏ú‡πà‡∏ô‡πÑ‡∏°‡πâ‡∏à‡∏≤‡∏Å 3D ‡πÄ‡∏õ‡πá‡∏ô 2D ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏¥‡∏ï</p>
        </div>
        
        <div class="controls">
            <button onclick="exportAsSVG()">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å SVG</button>
        </div>
        
        <div class="output-section" id="outputSection">
            <!-- ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏õ‡∏•‡∏á‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let panelData = {};
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏õ‡∏•‡∏á Three.js Shape ‡πÄ‡∏õ‡πá‡∏ô SVG Path ‡∏û‡∏£‡πâ‡∏≠‡∏° holes
        function shapeToSVGPath(shape, scale = 100) {
            const points = shape.getPoints();
            if (!points || points.length === 0) return { mainPath: '', holes: [] };
            
            // Main shape path
            let mainPath = `M ${points[0].x * scale} ${points[0].y * scale}`;
            
            for (let i = 1; i < points.length; i++) {
                mainPath += ` L ${points[i].x * scale} ${points[i].y * scale}`;
            }
            
            mainPath += ' Z';
            
            // Holes paths
            const holePaths = [];
            if (shape.holes && shape.holes.length > 0) {
                shape.holes.forEach(hole => {
                    const holePoints = hole.getPoints();
                    if (holePoints && holePoints.length > 0) {
                        let holePath = `M ${holePoints[0].x * scale} ${holePoints[0].y * scale}`;
                        
                        for (let i = 1; i < holePoints.length; i++) {
                            holePath += ` L ${holePoints[i].x * scale} ${holePoints[i].y * scale}`;
                        }
                        
                        holePath += ' Z';
                        holePaths.push(holePath);
                    }
                });
            }
            
            return { mainPath, holes: holePaths };
        }
        
        // ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏à‡∏≤‡∏Å panel_all_script.js - Shape functions ‡πÅ‡∏ö‡∏ö‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
        function createTopPanelShape() {
            const panelShape1 = new THREE.Shape();
            const cornerRadius = 0.1;
            
            // ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏à‡∏≤‡∏Å createPanel1() ‡πÉ‡∏ô panel_all_script.js
            panelShape1.moveTo(-1.9 + cornerRadius, -1);
            panelShape1.lineTo(1.9 - cornerRadius, -1);
            panelShape1.quadraticCurveTo(1.9, -1, 1.9, -1 + cornerRadius);
            panelShape1.lineTo(1.9, -0.6);
            panelShape1.lineTo(2, -0.6);
            panelShape1.lineTo(2, -0.2);
            panelShape1.lineTo(1.9, -0.2);
            panelShape1.lineTo(1.9, 0.2);
            panelShape1.lineTo(2, 0.2);
            panelShape1.lineTo(2, 0.6);
            panelShape1.lineTo(1.9, 0.6);
            panelShape1.lineTo(1.9, 0.9);
            panelShape1.lineTo(1, 0.9);
            panelShape1.lineTo(1, 1 - cornerRadius);
            panelShape1.quadraticCurveTo(1, 1, 1 - cornerRadius, 1);
            panelShape1.lineTo(-1 + cornerRadius, 1);
            panelShape1.quadraticCurveTo(-1, 1, -1, 1 - cornerRadius);
            panelShape1.lineTo(-1, 0.9);
            panelShape1.lineTo(-1.9, 0.9);
            panelShape1.lineTo(-1.9, 0.6);
            panelShape1.lineTo(-2, 0.6);
            panelShape1.lineTo(-2, 0.2);
            panelShape1.lineTo(-1.9, 0.2);
            panelShape1.lineTo(-1.9, -0.2);
            panelShape1.lineTo(-2, -0.2);
            panelShape1.lineTo(-2, -0.6);
            panelShape1.lineTo(-1.9, -0.6);
            panelShape1.lineTo(-1.9, -1 + cornerRadius);
            panelShape1.quadraticCurveTo(-1.9, -1, -1.9 + cornerRadius, -1);
            
            return panelShape1;
        }
        
        function createBottomPanelShape() {
            // ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô createPanel2() ‡πÉ‡∏ô panel_all_script.js (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö Top)
            return createTopPanelShape();
        }
        
        function createLeftPanelShape() {
            // ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏à‡∏≤‡∏Å createPanel3() ‡πÉ‡∏ô panel_all_script.js
            const panelShape3 = new THREE.Shape();
            const cornerRadius = 0.1;
            
            panelShape3.moveTo(-2 + cornerRadius, -1);
            panelShape3.lineTo(2 - cornerRadius, -1);
            panelShape3.quadraticCurveTo(2, -1, 2, -1 + cornerRadius);
            panelShape3.lineTo(2, 0.9);
            panelShape3.lineTo(1, 0.9);
            panelShape3.lineTo(1, 1 - cornerRadius);
            panelShape3.quadraticCurveTo(1, 1, 1 - cornerRadius, 1);
            panelShape3.lineTo(-1 + cornerRadius, 1);
            panelShape3.quadraticCurveTo(-1, 1, -1, 1 - cornerRadius);
            panelShape3.lineTo(-1, 0.9);
            panelShape3.lineTo(-2, 0.9);
            panelShape3.lineTo(-2, 0.6);
            panelShape3.lineTo(-1.9, 0.6);
            panelShape3.lineTo(-1.9, 0.2);
            panelShape3.lineTo(-2, 0.2);
            panelShape3.lineTo(-2, -0.2);
            panelShape3.lineTo(-1.9, -0.2);
            panelShape3.lineTo(-1.9, -0.6);
            panelShape3.lineTo(-2, -0.6);
            panelShape3.lineTo(-2, -1 + cornerRadius);
            panelShape3.quadraticCurveTo(-2, -1, -2 + cornerRadius, -1);
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏° holes
            const rightHole1 = new THREE.Shape();
            rightHole1.moveTo(1.8, 0.2);
            rightHole1.lineTo(1.9, 0.2);
            rightHole1.lineTo(1.9, 0.6);
            rightHole1.lineTo(1.8, 0.6);
            rightHole1.lineTo(1.8, 0.2);
            
            const rightHole2 = new THREE.Shape();
            rightHole2.moveTo(1.8, -0.6);
            rightHole2.lineTo(1.9, -0.6);
            rightHole2.lineTo(1.9, -0.2);
            rightHole2.lineTo(1.8, -0.2);
            rightHole2.lineTo(1.8, -0.6);
            
            panelShape3.holes.push(rightHole1);
            panelShape3.holes.push(rightHole2);
            
            return panelShape3;
        }
        
        function createRightPanelShape() {
            // ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô createPanel4() ‡πÉ‡∏ô panel_all_script.js (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö Left)
            return createLeftPanelShape();
        }
        
        function createBackPanelShape() {
            // ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏à‡∏≤‡∏Å createPanel5() ‡πÉ‡∏ô panel_all_script.js
            const panelShape5 = new THREE.Shape();
            const cornerRadius = 0.1;
            
            panelShape5.moveTo(-2.1 + cornerRadius, -2.05);
            panelShape5.lineTo(2.1 - cornerRadius, -2.05);
            panelShape5.quadraticCurveTo(2.1, -2.05, 2.1, -2.05 + cornerRadius);
            panelShape5.lineTo(2.1, 2.05 - cornerRadius);
            panelShape5.quadraticCurveTo(2.1, 2.05, 2.1 - cornerRadius, 2.05);
            panelShape5.lineTo(-2.1 + cornerRadius, 2.05);
            panelShape5.quadraticCurveTo(-2.1, 2.05, -2.1, 2.05 - cornerRadius);
            panelShape5.lineTo(-2.1, -2.05 + cornerRadius);
            panelShape5.quadraticCurveTo(-2.1, -2.05, -2.1 + cornerRadius, -2.05);
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏° 4 holes
            const leftHole = new THREE.Shape();
            leftHole.moveTo(-2.0, 0.95);
            leftHole.lineTo(-1.9, 0.95);
            leftHole.lineTo(-1.9, -1.05);
            leftHole.lineTo(-2.0, -1.05);
            leftHole.lineTo(-2.0, 0.95);
            
            const rightHole = new THREE.Shape();
            rightHole.moveTo(1.9, 0.95);
            rightHole.lineTo(2.0, 0.95);
            rightHole.lineTo(2.0, -1.05);
            rightHole.lineTo(1.9, -1.05);
            rightHole.lineTo(1.9, 0.95);
            
            const bottomHole = new THREE.Shape();
            bottomHole.moveTo(-1.0, -1.95);
            bottomHole.lineTo(1.0, -1.95);
            bottomHole.lineTo(1.0, -1.85);
            bottomHole.lineTo(-1.0, -1.85);
            bottomHole.lineTo(-1.0, -1.95);
            
            const topHole = new THREE.Shape();
            topHole.moveTo(-1.0, 1.85);
            topHole.lineTo(1.0, 1.85);
            topHole.lineTo(1.0, 1.95);
            topHole.lineTo(-1.0, 1.95);
            topHole.lineTo(-1.0, 1.85);
            
            panelShape5.holes.push(leftHole);
            panelShape5.holes.push(rightHole);
            panelShape5.holes.push(bottomHole);
            panelShape5.holes.push(topHole);
            
            return panelShape5;
        }
        
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ú‡πà‡∏ô
        const panelConfigs = {
            top: {
                name: '‡πÅ‡∏ú‡πà‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô (Top)',
                dimensions: '40√ó20√ó1 ‡∏ã‡∏°.',
                shape: createTopPanelShape,
                color: '#CD853F'
            },
            bottom: {
                name: '‡πÅ‡∏ú‡πà‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (Bottom)', 
                dimensions: '40√ó20√ó1 ‡∏ã‡∏°.',
                shape: createBottomPanelShape,
                color: '#DEB887'
            },
            left: {
                name: '‡πÅ‡∏ú‡πà‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ (Left)',
                dimensions: '20√ó28√ó1 ‡∏ã‡∏°.',
                shape: createLeftPanelShape,
                color: '#8B7355'
            },
            right: {
                name: '‡πÅ‡∏ú‡πà‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤ (Right)',
                dimensions: '20√ó28√ó1 ‡∏ã‡∏°.',
                shape: createRightPanelShape,
                color: '#A0522D'
            },
            back: {
                name: '‡πÅ‡∏ú‡πà‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á (Back)',
                dimensions: '38√ó28√ó1 ‡∏ã‡∏°.',
                shape: createBackPanelShape,
                color: '#654321'
            }
        };
        
        function convertPanel(panelType) {
            const config = panelConfigs[panelType];
            if (!config) return;
            
            const shape = config.shape();
            const pathData = shapeToSVGPath(shape);
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì bounding box
            const points = shape.getPoints();
            let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;
            
            points.forEach(point => {
                minX = Math.min(minX, point.x * 100);
                minY = Math.min(minY, point.y * 100);
                maxX = Math.max(maxX, point.x * 100);
                maxY = Math.max(maxY, point.y * 100);
            });
            
            const width = maxX - minX + 40;
            const height = maxY - minY + 40;
            const centerX = width / 2;
            const centerY = height / 2;
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á holes elements
            let holesElements = '';
            if (pathData.holes && pathData.holes.length > 0) {
                pathData.holes.forEach((holePath, index) => {
                    holesElements += `
                        <path d="${holePath}" 
                              fill="white" 
                              stroke="#666" 
                              stroke-width="1.5" 
                              stroke-linejoin="round"/>`;
                });
            }
            
            const svgContent = `
                <svg width="${width}" height="${height}" viewBox="0 0 ${width} ${height}" style="max-width: 100%; height: auto;">
                    <g transform="translate(${centerX}, ${centerY})">
                        <!-- Main shape with fill -->
                        <path d="${pathData.mainPath}" 
                              fill="rgba(139, 69, 19, 0.1)" 
                              stroke="none"/>
                        <!-- Main shape outline -->
                        <path d="${pathData.mainPath}" 
                              fill="none" 
                              stroke="#333" 
                              stroke-width="2" 
                              stroke-linejoin="round"/>
                        <!-- Holes -->
                        ${holesElements}
                    </g>
                    <!-- Grid lines for reference -->
                    <defs>
                        <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                            <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#eee" stroke-width="1"/>
                        </pattern>
                    </defs>
                    <rect width="100%" height="100%" fill="url(#grid)" opacity="0.3"/>
                </svg>
            `;
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á output element
            const outputSection = document.getElementById('outputSection');
            const existingPanel = document.getElementById(`panel-${panelType}`);
            if (existingPanel) existingPanel.remove();
            
            const panelDiv = document.createElement('div');
            panelDiv.className = 'panel-output';
            panelDiv.id = `panel-${panelType}`;
            panelDiv.innerHTML = `
                <h3>${config.name}</h3>
                <div class="svg-container">
                    ${svgContent}
                </div>
                <div class="panel-info">
                    <strong>‡∏Ç‡∏ô‡∏≤‡∏î:</strong> ${config.dimensions}<br>
                    <strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏∏‡∏î:</strong> ${points.length} ‡∏à‡∏∏‡∏î<br>
                    <strong>‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà:</strong> ${((maxX - minX) * (maxY - minY) / 10000).toFixed(2)} ‡∏ï‡∏£.‡∏ã‡∏°.
                </div>
            `;
            
            outputSection.appendChild(panelDiv);
            panelData[panelType] = { config, pathData, points, width, height };
        }
        
        function convertAllPanels() {
            Object.keys(panelConfigs).forEach(panelType => {
                convertPanel(panelType);
            });
        }
        
        function exportAsSVG() {
            if (Object.keys(panelData).length === 0) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏ú‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å');
                return;
            }
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á SVG ‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            let combinedSVG = `<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="1000" viewBox="0 0 800 1000">
    <title>Toybox Panels - Tab & Slot System</title>
    
    <!-- Background -->
    <rect width="100%" height="100%" fill="white"/>
    
    <!-- Title -->
    <text x="400" y="30" text-anchor="middle" font-size="20" font-weight="bold" fill="#8B4513">
        ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô - ‡πÅ‡∏ú‡πà‡∏ô‡πÑ‡∏°‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    </text>
    
    <!-- Panels -->`;
            
            let yOffset = 80;
            Object.keys(panelData).forEach((panelType, index) => {
                const data = panelData[panelType];
                const scale = Math.min(300 / data.width, 150 / data.height) * 100;
                
                // ‡∏™‡∏£‡πâ‡∏≤‡∏á holes elements ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö SVG export
                let exportHolesElements = '';
                if (data.pathData.holes && data.pathData.holes.length > 0) {
                    data.pathData.holes.forEach((holePath) => {
                        exportHolesElements += `
            <path d="${holePath}" fill="white" stroke="#666" stroke-width="${1.5/scale}"/>`;
                    });
                }
                
                combinedSVG += `
    <g transform="translate(400, ${yOffset})">
        <text x="0" y="-20" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">
            ${data.config.name} - ${data.config.dimensions}
        </text>
        <g transform="scale(${scale})">
            <path d="${data.pathData.mainPath}" fill="rgba(139, 69, 19, 0.1)"/>
            <path d="${data.pathData.mainPath}" fill="none" stroke="#333" stroke-width="${2/scale}"/>
            ${exportHolesElements}
        </g>
    </g>`;
                yOffset += 180;
            });
            
            combinedSVG += `
    
    <!-- Footer -->
    <text x="400" y="980" text-anchor="middle" font-size="12" fill="#666">
        ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ Three.js Panel Converter | Tab & Slot System
    </text>
</svg>`;
            
            // ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå
            const blob = new Blob([combinedSVG], { type: 'image/svg+xml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'toybox_panels_2d.svg';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        // Auto convert all panels when page loads
        window.addEventListener('DOMContentLoaded', function() {
            convertAllPanels();
        });
    </script>
</body>
</html>